---
title: "clockplot"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{clockplot}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  warning = FALSE,
  comment = "#>"
)
```

The package `clockplot` is used to generate clock charts showing event times 
on a 24-hour clock. Additionally it helps you make a day chart, week chart, 
or month chart, or plan events in those periods.

<span style = "color:Orange;">âš </span> The plots shown here may not produce the
expected output due to the behavior of Rmarkdown. To see the actual appearance,
[visit this link](https://github.com/mahmudstat/clockplot) or run the codes given. 

## Getting started

After installing the package, load it to use the available functions. 

```{r setup}
library(clockplot)
```

## Types of Charts

The clockpolot offers three types of plot

1. Clock charts
2. Cyclic Charts
3. Period planner

The first type shows event times (HH:MM:SS) on a 24 hour clock. The times can be 
arbitrary (such as `16:54:34`) and not necessarily specific hours at all. 


The second type allows you to show values during a certain duration (day, week, month, and year). There is a generic function `cyclic_chart()` for arbitrary period, while
there charts specially made for specific period (day, week, year etc.)

Finally, the third one can help you make a plan in a certain period (day, week, month, and year), presenting tasks against period. 

## Clock Charts

The examples use built-in data sets. If your times are in `HH:MM` format,
you can covert to `HH:MM:SS` format using `hms::parse_hm()`. 

### Basic Clock Chart

This is the simplest clock chart; the hands are
neither colored nor length modified by a criteria. 

We are going to use the `smsclock` data set. Let us have a look on it. 

```{r}
head(smsclock)
```

The necessary code to produce a chart is just this:

```{r eval=FALSE}
clock_chart(smsclock, time, Col = "green")
```

The code produces a `ggplot2` object, so we can add (`+`) add extra components 
to make it more informative. 


```{r clock-chart, fig.align = 'center', fig.height=6, fig.width=6}
p1 <- clock_chart(smsclock, time, Col = "green")
p1 + ggplot2::labs(title = "SMS Receiving Times")
```


### Colored Clock Chart

In the previous chart, we colored the hands by an arbitrary color. We may want
to color it by a `numeric` variable. `clock_chart_col()` exactly does this. 

We may use `bdquake` data set for this. 

```{r}
head(bdquake)
```

The code without added components. 

```{r eval=FALSE}
clock_chart_col(bdquake, time = hms, crit = mag)
```

Let us modify it.

```{r clock-chart-col, fig.align = 'center', fig.height=6, fig.width=6}
p <- clock_chart_col(bdquake, time = hms, crit = mag)
p + ggplot2::labs(size = "Magnitude", title = "Earthquakes in Bangladesh since 2023")
```


It would be great if we could modify the length of the hands as well. We see 
that in the next chart. 

### Chart with Modified and Colored Hands

We now use `clock_chart_qnt()`. We color the chart magnitude and change 
length by the depth of the earthquake hypocenter.

```{r eval=FALSE}
clock_chart_qnt(data = bdquake, time = hms, len = depth,
Col = mag, high = "red", low = "blue")
```

The `high` and `low` color names can be vice versa or other colors, depending on the context. To use a single color for all lines, use same value for `high` and `low`

**The custom plot**

```{r clock-chart-qnt, fig.align = 'center', fig.height=6, fig.width=6}
p1 <- clock_chart_qnt(data = bdquake, time = hms, len = depth,
Col = mag, high = "red", low = "blue")
p1 + ggplot2::labs(color = "Depth", size = "Magnitude",
title = "Earthquakes in Bangladesh since 2023")
```

If you do not have two variables for `len` and `Col`, use one single variable 
for both options. 

As is evident from the chart, the size of the points represents the magnitude 
of the earthquakes, while the color and the length of the hands stand for 
depth of the earthquakes. 

The plot shows that the quakes are roughly randomly distributed with respect 
to time. Most earthquakes occurred between around 1 PM to around 5 PM. Two 
of the biggest gaps can be seen between 5 PM to 9 PM (a gap amounting to 4 
hours) and 10 PM to quarter after 2 AM (almost 4.25 hours). 

### Modified Length

Although there is another function `clock_chart_len()` to modify length of the
clock hands, this is rarely useful. Here you can use a variable to modify the
length by and an argument `Col` to choose a specific color for the hands. 

```{r clock-chart-len, fig.align = 'center', fig.height=6, fig.width=6}
p1 <- clock_chart_len(data = bdquake, time = hms, crit = depth)
p1 + ggplot2::labs(title = "Earthquakes in Bangladesh since 2023")
```

### Qualitative variable


```{r clock-chart-qlt, fig.align = 'center', fig.height=6, fig.width=6}
clock_chart_qlt(smsclock, time = time, crit = sender)+
ggplot2::labs(color = "Sender", title = "SMS's Received throughout the Day")
```

This makes it convenient to see which sender sent messages when. 

We can also make use of the `facet_wrap()` function from the `ggplot2` package.



**Instructions from the beginning which args to use in labs.**
